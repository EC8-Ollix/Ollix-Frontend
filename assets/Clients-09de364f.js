import{u as $}from"./useNavigation-7fd3c0b2.js";import{d as j,T as q,r as g,x as R,y as T,z as D,e as k,n as x,_ as E,g as i,o as h,h as I,c as s,w as l,F as N,i as f,j as b,v as B,l as O,k as V,p as F,m as J}from"./index-56bca0b2.js";import{A as L,a as M}from"./AppleOutlined-93516e17.js";import{S as U}from"./SmileOutlined-bfaaf970.js";const G=j({name:"Clients",components:{AppleOutlined:L,AndroidOutlined:M,SmileOutlined:U,"a-table":q},setup(){const{goBack:e}=$(),c=g(["5","10","20","40","50"]),y=g("1"),v=g(0),r=g([]),u=g(!1),t=g({page:1,pageSize:10}),S=[{title:"",dataIndex:"active",width:"3%"},{title:"Razão Social",dataIndex:"companyName",width:"25%"},{title:"Nome Fantasia",dataIndex:"bussinessName",width:"25%"},{title:"CNPJ",dataIndex:"cnpj",width:"25%"},{title:"Ações",dataIndex:"actions",width:"20%"}],m=async()=>{var n;u.value=!0;try{const a=await k.get("/clients",{params:t.value});r.value=a.data.data,t.value.page=a.data.page,t.value.pageSize=a.data.pageSize,v.value=a.data.totalRecords}catch(a){let p=(n=a==null?void 0:a.response)==null?void 0:n.data;x(p)}finally{u.value=!1}},_=R();return T(()=>{_.query.pagination&&(t.value=JSON.parse(_.query.pagination)),m()}),D(t,m,{deep:!0}),{goBack:e,activeKey:y,data:r,loading:u,pagination:t,columns:S,toggleActive:async n=>{var a;n.isLoading=!0;try{await k.patch(`/clients/${n.id}/toggle`),n.active=!n.active}catch(p){let o=(a=p==null?void 0:p.response)==null?void 0:a.data;x(o)}finally{n.isLoading=!1}},onShowSizeChange:(n,a)=>{t.value.page=n,t.value.pageSize=a,a!==(t==null?void 0:t.value.pageSize)&&(r.value=[])},pageSizeOptions:c,handleSwitchChange:n=>{},totalRecords:v}}});const H=e=>(F("data-v-221d857c"),e=e(),J(),e),K={style:{padding:"20px",background:"#fff"},class:"content"},P={style:{"text-align":"center",padding:"25px"}},Q=H(()=>f("p",null,"Nada encontrado",-1));function W(e,c,y,v,r,u){const t=i("a-page-header"),S=i("smile-outlined"),m=i("a-switch"),_=i("a-popconfirm"),z=i("a-button"),C=i("router-link"),w=i("a-table"),n=i("a-config-provider"),a=i("a-pagination"),p=i("a-layout-content");return h(),I(N,null,[s(t,{class:"pageHeader",title:"Clientes","sub-title":"Gerencie os Clientes por aqui",onBack:e.goBack},null,8,["onBack"]),s(p,{style:{margin:"10px 16px 25px"}},{default:l(()=>[f("div",K,[s(n,null,{renderEmpty:l(()=>[f("div",P,[s(S,{style:{"font-size":"20px"}}),Q])]),default:l(()=>[s(w,{columns:e.columns,"data-source":e.data,pagination:!1,loading:e.loading,size:"small"},{bodyCell:l(({column:o,text:X,record:d})=>[o.dataIndex==="cnpj"?(h(),I(N,{key:0},[b(B(d.cnpj.value),1)],64)):o.dataIndex==="active"?(h(),O(_,{key:1,onConfirm:A=>e.toggleActive(d),title:"Tem certeza que deseja desativar esse cliente?"},{default:l(()=>[s(m,{checked:d.active,loading:d.isLoading,size:"small",onChange:A=>e.handleSwitchChange(d)},null,8,["checked","loading","onChange"])]),_:2},1032,["onConfirm"])):o.dataIndex==="actions"?(h(),O(C,{key:2,to:{name:"clientDetails",params:{clientId:d.id},query:{pagination:JSON.stringify(e.pagination)}}},{default:l(()=>[s(z,{size:"small"},{default:l(()=>[b("Detalhes")]),_:1})]),_:2},1032,["to"])):V("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),s(a,{current:e.pagination.page,"onUpdate:current":c[0]||(c[0]=o=>e.pagination.page=o),pageSize:e.pagination.pageSize,"onUpdate:pageSize":c[1]||(c[1]=o=>e.pagination.pageSize=o),"page-size-options":e.pageSizeOptions,"show-size-changer":"",total:e.totalRecords,onShowSizeChange:e.onShowSizeChange,style:{"text-align":"right",margin:"25px 0 15px 0"}},{buildOptionText:l(o=>[f("span",null,B(o.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])])]),_:1})],64)}const te=E(G,[["render",W],["__scopeId","data-v-221d857c"]]);export{te as default};
