import{u as A}from"./useNavigation-3ce7a12c.js";import{d as $,T as j,r as c,x as O,y as T,e as y,n as w,_ as E,g as i,o as h,h as z,c as d,w as l,F as k,i as b,j as x,v as I,l as N,k as V}from"./index-1a33eae3.js";import{A as D,a as F}from"./AppleOutlined-678cad54.js";const L=$({name:"Clients",components:{AppleOutlined:D,AndroidOutlined:F,"a-table":j},setup(){const{goBack:a}=A(),s=c(["5","10","20","40","50"]),_=c("1"),g=c([]),u=c(!1),o=c({page:1,pageSize:10}),m=[{title:"",dataIndex:"active",width:"5%"},{title:"Razão Social",dataIndex:"companyName",width:"25%"},{title:"Nome Fantasia",dataIndex:"bussinessName",width:"25%"},{title:"CNPJ",dataIndex:"cnpj",width:"25%"},{title:"Ações",dataIndex:"actions",width:"20%"}],r=async()=>{var n;u.value=!0;try{const e=await y.get("/clients",{params:o.value});g.value=e.data.data,o.value.page=e.data.page,o.value.pageSize=e.data.pageSize,o.value.total=e.data.totalRecords}catch(e){let t=(n=e==null?void 0:e.response)==null?void 0:n.data;w(t)}finally{u.value=!1}};return O(r),T(o,r,{deep:!0}),{goBack:a,activeKey:_,data:g,loading:u,pagination:o,columns:m,toggleActive:async n=>{var e;n.isLoading=!0;try{await y.patch(`/clients/${n.id}/toggle`),n.active=!n.active}catch(t){let C=(e=t==null?void 0:t.response)==null?void 0:e.data;w(C)}finally{n.isLoading=!1}},onShowSizeChange:(n,e)=>{o.value.page=n,o.value.pageSize=e,e!==(o==null?void 0:o.value.pageSize)&&(g.value=[])},pageSizeOptions:s,handleSwitchChange:n=>{}}}});const M={style:{padding:"20px",background:"#fff"},class:"content"};function U(a,s,_,g,u,o){const m=i("a-page-header"),r=i("a-switch"),v=i("a-popconfirm"),f=i("a-button"),S=i("a-pagination"),n=i("a-table"),e=i("a-layout-content");return h(),z(k,null,[d(m,{class:"pageHeader",title:"Clientes","sub-title":"Gerencie os UClientes suários por aqui",onBack:a.goBack},null,8,["onBack"]),d(e,{style:{margin:"10px 16px 25px"}},{default:l(()=>[b("div",M,[d(n,{columns:a.columns,"data-source":a.data,pagination:!1,loading:a.loading},{bodyCell:l(({column:t,text:C,record:p})=>[t.dataIndex==="cnpj"?(h(),z(k,{key:0},[x(I(p.cnpj.value),1)],64)):t.dataIndex==="active"?(h(),N(v,{key:1,onConfirm:B=>a.toggleActive(p),title:"Tem certeza que deseja desativar esse cliente?"},{default:l(()=>[d(r,{checked:p.active,loading:p.isLoading,onChange:B=>a.handleSwitchChange(p)},null,8,["checked","loading","onChange"])]),_:2},1032,["onConfirm"])):t.dataIndex==="actions"?(h(),N(f,{key:2},{default:l(()=>[x("Detalhes")]),_:1})):V("",!0)]),footer:l(()=>[d(S,{current:a.pagination.page,"onUpdate:current":s[0]||(s[0]=t=>a.pagination.page=t),pageSize:a.pagination.pageSize,"onUpdate:pageSize":s[1]||(s[1]=t=>a.pagination.pageSize=t),"page-size-options":a.pageSizeOptions,"show-size-changer":"",total:a.pagination.total,onShowSizeChange:a.onShowSizeChange,style:{"text-align":"right"}},{buildOptionText:l(t=>[b("span",null,I(t.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])]),_:1},8,["columns","data-source","loading"])])]),_:1})],64)}const H=E(L,[["render",U],["__scopeId","data-v-a3955a02"]]);export{H as default};
