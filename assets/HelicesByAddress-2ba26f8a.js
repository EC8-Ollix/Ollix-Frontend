import{d as E,K as H,r as v,v as O,F as B,b,n as D,_ as R,e as s,o as m,f as _,h as d,w as l,g as C,G as z,i as w,y as p,k as $,j as F,p as T,l as N}from"./index-8dd90bf4.js";import{f as V}from"./dateHelper-d63eedb5.js";import{S as j}from"./SmileOutlined-5a00cff8.js";import{F as q}from"./FileSearchOutlined-dcacaeb9.js";const L=E({name:"HelicesByAddress",components:{SmileOutlined:j,FileSearchOutlined:q},props:{clientId:{type:String},addressId:{type:String},orderId:{type:String},viaClientScreen:{type:Boolean,required:!0}},setup(t){const{clientId:i,addressId:f,orderId:r}=H(t),y=v(0);let S=[{title:"",dataIndex:"active",width:"3%"},{title:"Hélice Id",dataIndex:"helixId",width:"20%"},{title:"Dt. da Instalação",dataIndex:"installedDate",width:"15%"},{title:"Endereço",dataIndex:"addressApp",width:"50%"},{title:"Ações",dataIndex:"actions",width:"10%"}];r.value&&(S=S.filter(e=>e.dataIndex!=="active"&&e.dataIndex!=="actions"));const I=v(["5","10","20","40","50"]),c=v([]),g=v(!1),n=v({page:1,pageSize:10}),u=async()=>{var o;if(!i.value||!f.value)return;g.value=!0;const e={clientId:i.value,addressId:f.value,installed:!0,...n.value};r.value&&(e.orderId=r.value,e.installed=void 0);try{const a=await b.get("/propellers/by-address",{params:e});c.value=a.data.data,n.value.page=a.data.page,n.value.pageSize=a.data.pageSize,y.value=a.data.totalRecords}catch(a){let h=(o=a==null?void 0:a.response)==null?void 0:o.data;D(h)}finally{g.value=!1}};return O(u),B(n,u,{deep:!0}),B(r,u,{deep:!0}),{data:c,loading:g,pagination:n,columns:S,onShowSizeChange:(e,o)=>{n.value.page=e,n.value.pageSize=o,o!==(n==null?void 0:n.value.pageSize)&&(c.value=[])},pageSizeOptions:I,totalRecords:y,formatStringDateToBR:V,toggleActive:async e=>{var o;e.isLoading=!0;try{await b.patch(`/propellers/${e.id}/toggle`),e.active=!e.active}catch(a){let h=(o=a==null?void 0:a.response)==null?void 0:o.data;D(h)}finally{e.isLoading=!1}},handleSwitchChange:e=>{}}}});const M=t=>(T("data-v-d6a5dac1"),t=t(),N(),t),U={style:{"text-align":"center",padding:"25px"}},G=M(()=>C("p",null,"Nada encontrado",-1)),K={key:0,class:"align-column-center"};function J(t,i,f,r,y,S){const I=s("smile-outlined"),c=s("a-switch"),g=s("a-popconfirm"),n=s("FileSearchOutlined"),u=s("a-button"),x=s("a-table"),A=s("a-config-provider"),k=s("a-pagination");return m(),_(z,null,[d(A,null,{renderEmpty:l(()=>[C("div",U,[d(I,{style:{"font-size":"20px"}}),G])]),default:l(()=>[d(x,{columns:t.columns,"data-source":t.data,pagination:!1,loading:t.loading,size:"small"},{bodyCell:l(({column:e,text:o,record:a})=>[e.dataIndex==="active"?(m(),_("div",K,[d(g,{onConfirm:h=>t.toggleActive(a),title:a.active?"Tem certeza que deseja desativar essa Hélice?":"Tem certeza que deseja ativar essa Hélice?",placement:"topRight"},{default:l(()=>[d(c,{checked:a.active,loading:a.isLoading,size:"small",onChange:h=>t.handleSwitchChange(a)},null,8,["checked","loading","onChange"])]),_:2},1032,["onConfirm","title"])])):e.dataIndex==="installedDate"?(m(),_(z,{key:1},[w(p(t.formatStringDateToBR(a.order.installationDate)),1)],64)):e.dataIndex==="addressApp"?(m(),_(z,{key:2},[w(p(a.addressApp.street)+", "+p(a.addressApp.neighborhood)+" - "+p(a.addressApp.city)+"/"+p(a.addressApp.state),1)],64)):e.dataIndex==="actions"?(m(),$(u,{key:3,size:"small"},{default:l(()=>[d(n),w("Detalhes")]),_:1})):F("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),d(k,{current:t.pagination.page,"onUpdate:current":i[0]||(i[0]=e=>t.pagination.page=e),pageSize:t.pagination.pageSize,"onUpdate:pageSize":i[1]||(i[1]=e=>t.pagination.pageSize=e),"page-size-options":t.pageSizeOptions,"show-size-changer":"",total:t.totalRecords,onShowSizeChange:t.onShowSizeChange,style:{"text-align":"right",margin:"25px 0 15px 0"}},{buildOptionText:l(e=>[C("span",null,p(e.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])],64)}const Y=R(L,[["render",J],["__scopeId","data-v-d6a5dac1"]]);export{Y as H};
