import{u as D}from"./useNavigation-79450952.js";import{d as N,q as R,t as E,R as O,r as c,B as L,D as T,e as V,n as $,_ as q,g as l,o as h,h as z,l as U,k as C,c as u,w as g,Z as I,F as B,i as S,j as A,v as k,a0 as F,p as M,m as j}from"./index-500a5486.js";import{f as H}from"./dateHelper-d63eedb5.js";import{S as Z}from"./SmileOutlined-fe228a35.js";const G=N({name:"Logs",components:{SmileOutlined:Z},props:{clientId:{type:String},viaClientScreen:{type:Boolean,required:!0}},setup(e){const{goBack:s}=D(),y=R(),v=E(()=>y.state.isAdmin),{clientId:f,viaClientScreen:w}=O(e),m=c(0);let o=[];v.value&&o.push({title:"Id da Entidade",dataIndex:"entityId"}),o.push({title:"Entidade",dataIndex:"entity"}),o.push({title:"Operação",dataIndex:"operation"}),o.push({title:"Usuário",dataIndex:"userName"}),o.push({title:"Data",dataIndex:"date"});const _=c(["5","10","20","40","50"]),p=c([]),d=c(!1),a=c({page:1,pageSize:10}),t=async()=>{var r;d.value=!0;const i={...a.value};f.value&&(i.clientId=f.value||void 0);try{const n=await V.get("/logs",{params:i});p.value=n.data.data,a.value.page=n.data.page,a.value.pageSize=n.data.pageSize,m.value=n.data.totalRecords}catch(n){let b=(r=n==null?void 0:n.response)==null?void 0:r.data;$(b)}finally{d.value=!1}};return L(t),T(a,t,{deep:!0}),{goBack:s,data:p,loading:d,pagination:a,columns:o,onShowSizeChange:(i,r)=>{a.value.page=i,a.value.pageSize=r,r!==(a==null?void 0:a.value.pageSize)&&(p.value=[])},pageSizeOptions:_,totalRecords:m,isAdmin:v,formatStringDateToBR:H}}});const J=e=>(M("data-v-1d90b337"),e=e(),j(),e),K={style:{"text-align":"center",padding:"25px"}},P=J(()=>S("p",null,"Nada encontrado",-1));function Q(e,s,y,v,f,w){const m=l("a-page-header"),o=l("smile-outlined"),_=l("a-table"),p=l("a-config-provider"),d=l("a-pagination"),a=l("a-layout-content");return h(),z(B,null,[e.viaClientScreen?C("",!0):(h(),U(m,{key:0,class:"pageHeader",title:"Logs",onBack:e.goBack},null,8,["onBack"])),u(a,{style:I(e.viaClientScreen?{}:{margin:"10px 16px 25px"})},{default:g(()=>[S("div",{style:I(e.viaClientScreen?{}:{padding:"20px",background:"#fff"}),class:F({content:!e.viaClientScreen})},[u(p,null,{renderEmpty:g(()=>[S("div",K,[u(o,{style:{"font-size":"20px"}}),P])]),default:g(()=>[u(_,{columns:e.columns,"data-source":e.data,pagination:!1,loading:e.loading,size:"small"},{bodyCell:g(({column:t,text:x,record:i})=>[t.dataIndex==="postalCode"?(h(),z(B,{key:0},[A(k(e.formatStringDateToBR(i.requestDate)),1)],64)):C("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),u(d,{current:e.pagination.page,"onUpdate:current":s[0]||(s[0]=t=>e.pagination.page=t),pageSize:e.pagination.pageSize,"onUpdate:pageSize":s[1]||(s[1]=t=>e.pagination.pageSize=t),"page-size-options":e.pageSizeOptions,"show-size-changer":"",total:e.totalRecords,onShowSizeChange:e.onShowSizeChange,style:{"text-align":"right",margin:"25px 0 15px 0"}},{buildOptionText:g(t=>[S("span",null,k(t.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])],6)]),_:1},8,["style"])],64)}const ae=q(G,[["render",Q],["__scopeId","data-v-1d90b337"]]);export{ae as default};
