import{u as N}from"./useNavigation-8727155d.js";import{d as D,q as E,t as L,J as O,r as c,y as R,z as q,e as T,n as V,_ as $,g as l,o as h,h as z,l as U,k as C,c as u,w as g,L as I,F as k,i as S,j as A,v as w,O as F,p as M,m as j}from"./index-b8c5aaf6.js";import{f as G}from"./dateHelper-d63eedb5.js";import{S as H}from"./SmileOutlined-e43e89f6.js";const J=D({name:"Logs",components:{SmileOutlined:H},props:{clientId:{type:String},viaClientScreen:{type:Boolean,required:!0}},setup(e){const{goBack:s}=N(),y=E(),v=L(()=>y.state.isAdmin),{clientId:f,viaClientScreen:B}=O(e),m=c(0);let o=[];v.value&&o.push({title:"Id da Entidade",dataIndex:"entityId"}),o.push({title:"Entidade",dataIndex:"entity"}),o.push({title:"Operação",dataIndex:"operation"}),o.push({title:"Usuário",dataIndex:"userName"}),o.push({title:"Data",dataIndex:"date"});const _=c(["5","10","20","40","50"]),p=c([]),d=c(!1),a=c({page:1,pageSize:10}),t=async()=>{var r;d.value=!0;const i={...a.value};f.value&&(i.clientId=f.value||void 0);try{const n=await T.get("/logs",{params:i});p.value=n.data.data,a.value.page=n.data.page,a.value.pageSize=n.data.pageSize,m.value=n.data.totalRecords}catch(n){let x=(r=n==null?void 0:n.response)==null?void 0:r.data;V(x)}finally{d.value=!1}};return R(t),q(a,t,{deep:!0}),{goBack:s,data:p,loading:d,pagination:a,columns:o,onShowSizeChange:(i,r)=>{a.value.page=i,a.value.pageSize=r,r!==(a==null?void 0:a.value.pageSize)&&(p.value=[])},pageSizeOptions:_,totalRecords:m,isAdmin:v,formatStringDateToBR:G}}});const K=e=>(M("data-v-43b56d34"),e=e(),j(),e),P={style:{"text-align":"center",padding:"25px"}},Q=K(()=>S("p",null,"Nada encontrado",-1));function W(e,s,y,v,f,B){const m=l("a-page-header"),o=l("smile-outlined"),_=l("a-table"),p=l("a-config-provider"),d=l("a-pagination"),a=l("a-layout-content");return h(),z(k,null,[e.viaClientScreen?C("",!0):(h(),U(m,{key:0,class:"pageHeader",title:"Logs","sub-title":"Gerencie os Logs por aqui",onBack:e.goBack},null,8,["onBack"])),u(a,{style:I(e.viaClientScreen?{}:{margin:"10px 16px 25px"})},{default:g(()=>[S("div",{style:I(e.viaClientScreen?{}:{padding:"20px",background:"#fff"}),class:F({content:!e.viaClientScreen})},[u(p,null,{renderEmpty:g(()=>[S("div",P,[u(o,{style:{"font-size":"20px"}}),Q])]),default:g(()=>[u(_,{columns:e.columns,"data-source":e.data,pagination:!1,loading:e.loading,size:"small"},{bodyCell:g(({column:t,text:b,record:i})=>[t.dataIndex==="postalCode"?(h(),z(k,{key:0},[A(w(e.formatStringDateToBR(i.requestDate)),1)],64)):C("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),u(d,{current:e.pagination.page,"onUpdate:current":s[0]||(s[0]=t=>e.pagination.page=t),pageSize:e.pagination.pageSize,"onUpdate:pageSize":s[1]||(s[1]=t=>e.pagination.pageSize=t),"page-size-options":e.pageSizeOptions,"show-size-changer":"",total:e.totalRecords,onShowSizeChange:e.onShowSizeChange,style:{"text-align":"right",margin:"25px 0 15px 0"}},{buildOptionText:g(t=>[S("span",null,w(t.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])],6)]),_:1},8,["style"])],64)}const ae=$(J,[["render",W],["__scopeId","data-v-43b56d34"]]);export{ae as default};
