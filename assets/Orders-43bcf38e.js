import{u as U}from"./useNavigation-dd35bdf4.js";import{f as V}from"./dateHelper-d63eedb5.js";import{J as $,K as J,L as j,d as Q,M as d,N as H,T as W,r as v,q as G,t as K,O as X,B as Z,D as ee,a as ae,Q as te,e as oe,n as se,_ as ne,g as r,o as m,h as T,l as w,k as P,c as a,w as t,R as A,F as B,i as s,j as c,v as F,V as le,y as re,W as ie,p as de,m as ue}from"./index-7d2574e2.js";import{g as ce}from"./orderStatus-551d53c6.js";import{S as pe}from"./SmileOutlined-ef549c29.js";var me={exports:{}};(function(e,l){(function(D,f){e.exports=f($)})(J,function(D){function f(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var k=f(D),b={name:"pt-br",weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(i){return i+"º"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}};return k.default.locale(b,null,!0),b})})(me);const _e={locale:"pt_BR",today:"Hoje",now:"Agora",backToToday:"Voltar para hoje",ok:"Ok",clear:"Limpar",month:"Mês",year:"Ano",timeSelect:"Selecionar hora",dateSelect:"Selecionar data",monthSelect:"Escolher mês",yearSelect:"Escolher ano",decadeSelect:"Escolher década",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!1,previousMonth:"Mês anterior (PageUp)",nextMonth:"Próximo mês (PageDown)",previousYear:"Ano anterior (Control + esquerda)",nextYear:"Próximo ano (Control + direita)",previousDecade:"Década anterior",nextDecade:"Próxima década",previousCentury:"Século anterior",nextCentury:"Próximo século",shortWeekDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},fe=_e,ge={placeholder:"Hora"},Se=ge,ve={lang:j({placeholder:"Selecionar data",rangePlaceholder:["Data inicial","Data final"]},fe),timePickerLocale:j({},Se)},he=ve;d.locale("pt-br");const ye=Q({name:"Orders",props:{clientId:{type:String},viaClientScreen:{type:Boolean,required:!0}},components:{FileTextOutlined:H,SmileOutlined:pe,"a-table":W},setup(e){const{goBack:l}=U(),D=v(["5","10","20","40","50"]),f=v(0),k=G(),b=K(()=>k.state.isAdmin),i=v([]),h=v(!1),{clientId:u,viaClientScreen:E}=X(e),n=v({page:1,pageSize:10}),I=[{title:"Status",dataIndex:"orderStatus",width:"10%"},{title:"Cliente",dataIndex:"client",width:"20%"},{title:"Nome",dataIndex:"requesterName",width:"25%"},{title:"Email",dataIndex:"requesterEmail",width:"20%"},{title:"Data da Solicitação",dataIndex:"requestDate",width:"15%"},{title:"Qtd.",dataIndex:"quantityRequested",width:"5%"},{title:"Ações",dataIndex:"actions",width:"5%"}],g=async()=>{var q;h.value=!0;const z={requestedDateFrom:p.requestedDate[0].toDate(),requestedDateTo:p.requestedDate[1].toDate(),...p,...n.value};u.value&&(z.clientId=u.value);try{const _=await oe.get("/orders",{params:z});i.value=_.data.data,n.value.page=_.data.page,n.value.pageSize=_.data.pageSize,f.value=_.data.totalRecords}catch(_){let R=(q=_==null?void 0:_.response)==null?void 0:q.data;se(R)}finally{h.value=!1}};Z(g),ee(n,g,{deep:!0});const Y=(z,q)=>{n.value.page=z,n.value.pageSize=q,q!==(n==null?void 0:n.value.pageSize)&&(i.value=[])},C="DD/MM/YYYY",L=d(),O=d().subtract(30,"day"),x=v([{label:"Últimos 7 dias",value:[d().add(-7,"d"),d()]},{label:"Últimos 14 dias",value:[d().add(-14,"d"),d()]},{label:"Últimos 30 dias",value:[d().add(-30,"d"),d()]},{label:"Últimos 90 dias",value:[d().add(-90,"d"),d()]}]),M=v([d(O,C),d(L,C)]),p=ae({clientSearch:void 0,requesterSearch:void 0,requestedDate:M.value,orderStatus:void 0});return{goBack:l,data:i,loading:h,pagination:n,columns:I,onShowSizeChange:Y,pageSizeOptions:D,totalRecords:f,formatStringDateToBR:V,getTagForOrderStatus:ce,FileTextOutlined:H,h:te,formState:p,handlePesquisa:async()=>{await g()},rangeConfig:{rules:[{type:"array"}]},dateFormat:C,isAdmin:b,locale:he,limpaPesquisa:async()=>{p.clientSearch=void 0,p.requesterSearch=void 0,p.orderStatus=void 0,p.requestedDate=M.value},rangePresets:x}}});const y=e=>(de("data-v-f797adfb"),e=e(),ue(),e),De={class:"filtros"},be=y(()=>s("h3",null,"Filtros",-1)),Ye=y(()=>s("div",{class:"perso-label"},"Cliente",-1)),Ce=y(()=>s("div",{class:"perso-label"},"Solicitante",-1)),qe=y(()=>s("div",{class:"perso-label"}," Data da Solicitação ",-1)),we=y(()=>s("div",{class:"perso-label"},"Status",-1)),ke={class:"button-form-item"},Me={class:"button-form-item"},ze={class:"table-results"},Te={style:{"text-align":"center",padding:"25px"}},Pe=y(()=>s("p",null,"Nada encontrado",-1)),Fe={key:3};function Ie(e,l,D,f,k,b){const i=r("a-page-header"),h=r("a-input"),u=r("a-col"),E=r("a-range-picker"),n=r("a-select-option"),I=r("a-select"),g=r("a-row"),Y=r("a-button"),C=r("smile-outlined"),L=r("a-tag"),O=r("a-table"),x=r("a-config-provider"),M=r("a-pagination"),p=r("a-layout-content");return m(),T(B,null,[e.viaClientScreen?P("",!0):(m(),w(i,{key:0,class:"pageHeader",title:"Pedidos",onBack:e.goBack},null,8,["onBack"])),a(p,{style:A(e.viaClientScreen?{}:{margin:"10px 16px 25px"})},{default:t(()=>[s("div",{style:A(e.viaClientScreen?{}:{padding:"20px",background:"#fff"}),class:ie({content:!e.viaClientScreen})},[s("div",De,[be,a(g,null,{default:t(()=>[a(u,{class:"filtros-input",span:19},{default:t(()=>[a(g,null,{default:t(()=>[e.isAdmin?(m(),w(u,{key:0,span:8},{default:t(()=>[s("div",null,[Ye,a(h,{value:e.formState.clientSearch,"onUpdate:value":l[0]||(l[0]=o=>e.formState.clientSearch=o),placeholder:"Cliente"},null,8,["value"])])]),_:1})):P("",!0),e.isAdmin?P("",!0):(m(),w(u,{key:1,span:8},{default:t(()=>[s("div",null,[Ce,a(h,{value:e.formState.requesterSearch,"onUpdate:value":l[1]||(l[1]=o=>e.formState.requesterSearch=o),placeholder:"Cliente"},null,8,["value"])])]),_:1})),a(u,{span:9},{default:t(()=>[s("div",null,[qe,a(E,{value:e.formState.requestedDate,"onUpdate:value":l[2]||(l[2]=o=>e.formState.requestedDate=o),format:e.dateFormat,style:{width:"100%"},locale:e.locale,presets:e.rangePresets},null,8,["value","format","locale","presets"])])]),_:1}),a(u,{span:7},{default:t(()=>[s("div",null,[we,a(I,{value:e.formState.orderStatus,"onUpdate:value":l[3]||(l[3]=o=>e.formState.orderStatus=o),placeholder:"Status",style:{width:"100%"},allowClear:""},{default:t(()=>[a(n,{value:"1"},{default:t(()=>[c("Pendente")]),_:1}),a(n,{value:"2"},{default:t(()=>[c("Instalação Pendente")]),_:1}),a(n,{value:"3"},{default:t(()=>[c("Finalizado")]),_:1}),a(n,{value:"4"},{default:t(()=>[c("Negado")]),_:1}),a(n,{value:"5"},{default:t(()=>[c("Cancelado")]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1}),a(u,{class:"filtros-button",span:5},{default:t(()=>[a(g,null,{default:t(()=>[a(u,{span:15},{default:t(()=>[s("div",ke,[a(Y,{type:"primary",style:{width:"100%"},onClick:e.handlePesquisa},{default:t(()=>[c(" Pesquisar ")]),_:1},8,["onClick"])])]),_:1}),a(u,{span:1}),a(u,{span:8},{default:t(()=>[s("div",Me,[a(Y,{style:{width:"100%"},onClick:e.limpaPesquisa},{default:t(()=>[c(" Limpar ")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",ze,[a(x,null,{renderEmpty:t(()=>[s("div",Te,[a(C,{style:{"font-size":"20px"}}),Pe])]),default:t(()=>[a(O,{columns:e.columns,"data-source":e.data,pagination:!1,loading:e.loading,size:"small"},{bodyCell:t(({column:o,text:N,record:S})=>[o.dataIndex==="requestDate"?(m(),T(B,{key:0},[c(F(e.formatStringDateToBR(S.requestDate)),1)],64)):o.dataIndex==="client"?(m(),T(B,{key:1},[c(F(S.clientApp.bussinessName),1)],64)):o.dataIndex==="orderStatus"?(m(),w(L,{key:2,color:e.getTagForOrderStatus(S.orderStatus).color},le({default:t(()=>[c(" "+F(e.getTagForOrderStatus(S.orderStatus).text),1)]),_:2},[e.getTagForOrderStatus(S.orderStatus).icon?{name:"icon",fn:t(()=>[(m(),w(re(e.getTagForOrderStatus(S.orderStatus).icon)))]),key:"0"}:void 0]),1032,["color"])):o.dataIndex==="actions"?(m(),T("div",Fe,[a(Y,{icon:e.h(e.FileTextOutlined),href:"https://www.google.com",size:"small"},{default:t(()=>[c(" Visualizar ")]),_:1},8,["icon"])])):P("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),a(M,{current:e.pagination.page,"onUpdate:current":l[4]||(l[4]=o=>e.pagination.page=o),pageSize:e.pagination.pageSize,"onUpdate:pageSize":l[5]||(l[5]=o=>e.pagination.pageSize=o),"page-size-options":e.pageSizeOptions,"show-size-changer":"",total:e.totalRecords,onShowSizeChange:e.onShowSizeChange,style:{"text-align":"right",margin:"25px 0 15px 0"}},{buildOptionText:t(o=>[s("span",null,F(o.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])])],6)]),_:1},8,["style"])],64)}const je=ne(ye,[["render",Ie],["__scopeId","data-v-f797adfb"]]);export{je as default};
