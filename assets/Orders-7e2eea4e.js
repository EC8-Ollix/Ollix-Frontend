import{u as He}from"./useNavigation-b4f5295b.js";import{f as Se}from"./dateHelper-d63eedb5.js";import{d as qe,K as Ee,r as g,v as Ie,F as ye,b as L,n as K,_ as Pe,e as c,o as m,k as I,w as t,h as a,i as d,g as l,y as b,L as D,M as be,B as Oe,N as ke,C as me,t as ve,T as Me,m as Ve,q as je,a as fe,O as X,Q as j,R as Le,c as re,f as N,j as h,V as _e,G as ge,W as we,x as De,X as Ke,p as Qe,l as Ye}from"./index-8dd90bf4.js";import{g as We,O as se}from"./orderStatus-aaf086c0.js";import{l as Ge}from"./pt_BR-f3c0d717.js";import{H as Ne}from"./HelicesByAddress-2ba26f8a.js";import{S as Te}from"./SmileOutlined-5a00cff8.js";import{F as Xe}from"./FileSearchOutlined-dcacaeb9.js";const Je=qe({name:"OrderDetails",components:{SmileOutlined:Te,FileSearchOutlined:Xe,HelicesByAddress:Ne},props:{clientId:{type:String},orderId:{type:String},visible:{type:Boolean,required:!0}},setup(e,{emit:r}){const{clientId:G,orderId:H,visible:M}=Ee(e),V=g(),A=async()=>{var q;if(!(!G.value||!H.value))try{const v=await L.get(`/orders/${H.value}`);V.value=v.data}catch(v){let F=(q=v==null?void 0:v.response)==null?void 0:q.data;K(F)}};return Ie(A),ye(H,A,{deep:!0}),{visible:M,orderData:V,formatStringDateToBR:Se,closeModal:q=>{console.log(q),M.value=!1},handleOk:q=>{console.log(q),M.value=!1}}}});function Ze(e,r,G,H,M,V){const A=c("HelicesByAddress"),k=c("a-button"),u=c("a-modal");return m(),I(u,{open:e.visible,"onUpdate:open":r[0]||(r[0]=q=>e.visible=q),title:"Realize seu Pedido de Hélices!",width:"900px",onCancel:e.closeModal,onOk:e.handleOk},{footer:t(()=>[a(k,{style:{"margin-left":"10px"},onClick:e.closeModal},{default:t(()=>[d("Fechar")]),_:1},8,["onClick"]),a(k,{type:"primary",onClick:e.closeModal,loading:!1},{default:t(()=>[d("Confirmar Pedido")]),_:1},8,["onClick"])]),default:t(()=>{var q,v,F;return[l("h3",null,b((q=e.orderData)==null?void 0:q.id),1),l("div",null,[a(A,{clientId:(v=e.orderData)==null?void 0:v.clientId,addressId:(F=e.orderData)==null?void 0:F.addressId,viaClientScreen:!0},null,8,["clientId","addressId"])])]}),_:1},8,["open","onCancel","onOk"])}const xe=Pe(Je,[["render",Ze],["__scopeId","data-v-798cbfcf"]]);D.locale("pt-br");const ea=qe({name:"Orders",props:{clientId:{type:String},viaClientScreen:{type:Boolean,required:!0}},components:{FileTextOutlined:be,SmileOutlined:Te,SearchOutlined:Oe,PlusOutlined:ke,CheckCircleOutlined:me,CloseCircleOutlined:ve,HelicesByAddress:Ne,OrderDetails:xe,"a-table":Me},setup(e){const{goBack:r}=He(),G=g(["5","10","20","40","50"]),H=g(0),M=Ve(),V=je(()=>M.state.isAdmin),A=g([]),k=g(!1),{clientId:u,viaClientScreen:q}=Ee(e),v=g({page:1,pageSize:10});let F=[{title:"Status",dataIndex:"orderStatus",width:"10%"},{title:"N. do Pedido",dataIndex:"orderNumber",width:"10%"},{title:"Cliente",dataIndex:"client",width:"20%"},{title:"Nome",dataIndex:"requesterName",width:"20%"},{title:"Email",dataIndex:"requesterEmail",width:"20%"},{title:"Dt. da Solicitação",dataIndex:"requestDate",width:"10%"},{title:"Qtd.",dataIndex:"quantityRequested",width:"5%"},{title:"Ações",dataIndex:"actions",width:"5%"}];V.value||(F=F.filter(n=>n.dataIndex!=="client"));const _=async n=>{var i;k.value=!0;const s={requestedDateFrom:T.requestedDate[0].toDate(),requestedDateTo:T.requestedDate[1].toDate(),...T,...v.value};n&&(s.page=1),u.value&&(s.clientId=u.value);try{const f=await L.get("/orders",{params:s});A.value=f.data.data,v.value.page=f.data.page,v.value.pageSize=f.data.pageSize,H.value=f.data.totalRecords}catch(f){let ce=(i=f==null?void 0:f.response)==null?void 0:i.data;K(ce)}finally{k.value=!1}};Ie(()=>_(!1)),ye(v,()=>_(!1),{deep:!0});const ne=(n,s)=>{v.value.page=n,v.value.pageSize=s,s!==(v==null?void 0:v.value.pageSize)&&(A.value=[])},C="DD/MM/YYYY",J=D(),Z=D().subtract(30,"day"),de=g([{label:"Últimos 7 dias",value:[D().add(-7,"d"),D()]},{label:"Últimos 14 dias",value:[D().add(-14,"d"),D()]},{label:"Últimos 30 dias",value:[D().add(-30,"d"),D()]},{label:"Últimos 90 dias",value:[D().add(-90,"d"),D()]}]),x=g([D(Z,C),D(J,C)]),T=fe({orderNumber:void 0,clientSearch:void 0,requesterSearch:void 0,requestedDate:x.value,orderStatus:void 0}),ie=async()=>{await _(!0)},z=async()=>{T.orderNumber=void 0,T.clientSearch=void 0,T.requesterSearch=void 0,T.orderStatus=void 0,T.requestedDate=x.value},Q=g(!0),ue={requesterName:[{required:!0,message:"Digite o nome do solicitante",trigger:"change"},{max:200,message:"O Nome do Solicitante deve ter no máximo 200 caracteres",trigger:"blur"}],requesterEmail:[{required:!0,message:"Digite o nome do solicitante",trigger:"change"},{max:200,message:"O Email do Solicitante deve ter no máximo 200 caracteres",trigger:"blur"},{type:"email",message:"O Email está inválido",trigger:"blur"}],observation:[{max:600,message:"A Observação deve ter no máximo 200 caracteres",trigger:"blur"}],quantityRequested:[{required:!0,message:"Obrigatório",trigger:"change"},{validator:(n,s)=>s>0?Promise.resolve():Promise.reject("Obrigatório"),trigger:"change"}],postalCode:[{required:!0,message:"O CEP é obrigatório",trigger:"change"},{min:9,max:9,message:"CEP Inválido",trigger:"blur"},{validator:(n,s)=>Q.value?Promise.resolve():Promise.reject("CEP Inválido"),trigger:"blur"}]},ee=g(!1),R=g(!1),$=g(),ae=g(!1),p=fe({requesterName:"",requesterEmail:"",observation:"",postalCode:"",street:"",neighborhood:"",cityState:"",quantityRequested:0}),te=n=>{const s=n.replace(/[^\d]/g,"");let i=s;return s.length>5?i=`${s.slice(0,5)}-${s.slice(5,8)}`:i=s,i.slice(0,9)},o=n=>{const i=n.target.value;p.postalCode=te(i),p.postalCode.length===9&&P(i)},P=async n=>{try{p.street="",p.neighborhood="",p.cityState="";const i=n.replace("-",""),f=await Le.get(`https://viacep.com.br/ws/${i}/json/`);f.data&&f.data.logradouro?(p.street=`${f.data.logradouro}`,p.neighborhood=`${f.data.bairro}`,p.cityState=`${f.data.localidade}/${f.data.uf}`,Q.value=!0):(s(),Q.value=!1)}catch{s(),Q.value=!1}function s(){p.street="Verifique seu CEP",p.neighborhood="Verifique seu CEP",p.cityState="Verifique seu CEP"}},w=async()=>{await $.value.validate().then(async()=>{var n;R.value=!0;try{const i=(await L.post("/orders",p)).data;await _(!1),R.value=!1,S(i.orderNumber)}catch(s){R.value=!1;let i=(n=s==null?void 0:s.response)==null?void 0:n.data;K(i)}}).catch(n=>{})},S=n=>{X.confirm({title:`Pedido ${n} Realizado com Sucesso!`,icon:j(me,{style:"color:green;"}),content:j("div",{style:"padding-bottom:15px;"},"Deseja realizar um novo Pedido?"),width:"490px",okText:"Sim",okType:"primary",cancelText:"Não, obrigado",onOk(){p.street="",p.neighborhood="",p.cityState="",p.observation="",p.postalCode="",p.quantityRequested=0},onCancel(){ae.value=!1,E()}})},E=()=>{p.street="",p.neighborhood="",p.cityState="",p.observation="",p.postalCode="",p.quantityRequested=0,$.value.resetFields()},B=g(!1),U=g(!1),y=g(),Y=g(),oe=async n=>{y.value=n,B.value=!0},ze=n=>{B.value=!1,pe.value=[]},le=g(!1),W=g(!1),he=g(),Ce=fe({installationDate:D(J,C)}),Ae=n=>{le.value=!0},Fe=()=>{le.value=!1},Re=async()=>{await he.value.validate().then(async()=>{var n;W.value=!0;try{const s={approved:!0,installationDate:Ce.installationDate.format()},f=(await L.patch(`https://localhost:7219/api/orders/${y.value.id}/process`,s)).data;await _(!1),W.value=!1,y.value.installationDate=f.installationDate,y.value.orderStatus=se.InstallationPending,re({successTitle:"Pedido Aprovado com sucesso!"}),le.value=!1}catch(s){W.value=!1;let i=(n=s==null?void 0:s.response)==null?void 0:n.data;K(i)}}).catch(n=>{})};X.useModal();const $e=async n=>{X.confirm({title:"Tem certeza de que deseja negar esse pedido?",icon:j(ve,{style:"color:red;"}),width:"490px",okText:"Sim, tenho certeza",okType:"primary",cancelText:"Não, obrigado",async onOk(){var s;try{const i={approved:!1},ce=(await L.patch(`https://localhost:7219/api/orders/${y.value.id}/process`,i)).data;await _(!1),W.value=!1,y.value=ce,re({successTitle:"Pedido Negado com sucesso!"})}catch(i){let f=(s=i==null?void 0:i.response)==null?void 0:s.data;K(f)}},onCancel(){}})},Be=()=>{let n;n=j("div",{style:"padding-bottom:15px;"},`Esse pedido estará sendo instalado antes da data prevista do dia ${Se(y.value.installationDate)}?`),X.confirm({title:"Tem certeza de que deseja confirmar a instalação desse pedido?",icon:j(me,{style:"color:green;"}),width:"620px",content:n,okText:"Sim, tenho certeza",okType:"primary",cancelText:"Não, obrigado",async onOk(){var s;try{await L.patch(`https://localhost:7219/api/orders/${y.value.id}/confirm-installation`),await _(!1),y.value.installationDate=D(new Date).format(),y.value.orderStatus=se.Completed,re({successTitle:"Instalação confirmada com sucesso!"})}catch(i){let f=(s=i==null?void 0:i.response)==null?void 0:s.data;K(f)}},onCancel(){}})},Ue=n=>{X.confirm({title:"Tem certeza de que deseja cancelar esse pedido?",icon:j(ve,{style:"color:red;"}),width:"490px",okText:"Sim, tenho certeza",okType:"primary",cancelText:"Não, obrigado",async onOk(){var s;try{await L.patch(`https://localhost:7219/api/orders/${y.value.id}/cancel`),await _(!1),W.value=!1,y.value.orderStatus=se.Cancel,re({successTitle:"Pedido Negado com sucesso!"})}catch(i){let f=(s=i==null?void 0:i.response)==null?void 0:s.data;K(f)}},onCancel(){}})},pe=g([]);return ye(pe,n=>{console.log(n)}),{goBack:r,data:A,loading:k,pagination:v,columns:F,onShowSizeChange:ne,pageSizeOptions:G,totalRecords:H,formatStringDateToBR:Se,getTagForOrderStatus:We,FileTextOutlined:be,h:j,formState:T,handlePesquisa:ie,dateFormat:C,isAdmin:V,locale:Ge,limpaPesquisa:z,rangePresets:de,SearchOutlined:Oe,PlusOutlined:ke,onNewOrderConfirm:w,newOrderState:p,formRef:$,visible:ae,confirmLoading:R,rules:ue,newOrderStepOne:ee,onInputCep:o,resetForm:E,visibleDetails:B,viewOrderDetails:oe,closeModal:ze,orderSelected:y,approveOrder:Ae,cancelOrder:Ue,denyOrder:$e,confirmOrderInstallation:Be,OrderStatus:se,collapseOrderKey:pe,aproveOrderVisible:le,aproveOrderLoading:W,aproveOrderState:Ce,onAproveOrderConfirm:Re,onAproveOrderCancel:Fe,aproveFormRef:he,orderHelicesVisible:U,formatCEP:te,orderSelectedId:Y,closeHelicesDetails:()=>{Y.value="",U.value=!1},openHelicesDetails:()=>{Y.value=y.value.id,U.value=!0}}}});const O=e=>(Qe("data-v-f47527e9"),e=e(),Ye(),e),aa={class:"filtros"},ta=O(()=>l("h3",null,"Filtros",-1)),oa=O(()=>l("div",{class:"perso-label"},"N. do Pedido",-1)),la=O(()=>l("div",{class:"perso-label"},"Cliente",-1)),ra=O(()=>l("div",{class:"perso-label"},"Solicitante",-1)),sa=O(()=>l("div",{class:"perso-label"}," Data da Solicitação ",-1)),na=O(()=>l("div",{class:"perso-label"},"Status",-1)),da={class:"button-form-item"},ia={class:"button-form-item"},ua={key:0,class:"actions"},pa={class:"table-results"},ca={style:{"text-align":"center",padding:"25px"}},ma=O(()=>l("p",null,"Nada encontrado",-1)),va={key:3},fa={class:"order-header"},ga={style:{"font-size":"0.9rem"}},Sa=O(()=>l("strong",null,"Número do Pedido:",-1)),ya={style:{"margin-right":"2rem"}},ha={class:"modal-order-details"},Ca={class:"requester-details"},ba=O(()=>l("span",null,"Nome:",-1)),Oa=O(()=>l("span",null,"Email:",-1)),ka={class:"order-details"},_a=O(()=>l("span",null,"Data do Pedido:",-1)),wa=O(()=>l("span",null,"Quantidade Solicitada:",-1)),Da={class:"order-address-details"},qa=O(()=>l("span",null,"CEP:",-1)),Ea=O(()=>l("span",null,"Logradouro:",-1)),Ia=O(()=>l("span",null,"Bairro:",-1)),Pa=O(()=>l("span",null,"Cidade/Estado:",-1)),Na={style:{color:"#01010194"}},Ta={key:0,class:"order-details-installation"},za=O(()=>l("span",null,"Status:",-1)),Aa={key:0},Fa={key:1},Ra={key:2},$a=O(()=>l("span",null,"Data da Instalação:",-1)),Ba={style:{"margin-top":"2rem",display:"flex","justify-content":"end"}},Ua={key:0},Ha={key:1},Ma={key:2,style:{"margin-left":"1rem"}},Va={style:{"margin-top":"2rem"}};function ja(e,r,G,H,M,V){const A=c("a-page-header"),k=c("a-input"),u=c("a-col"),q=c("a-range-picker"),v=c("a-select-option"),F=c("a-select"),_=c("a-row"),ne=c("SearchOutlined"),C=c("a-button"),J=c("smile-outlined"),Z=c("a-tag"),de=c("a-table"),x=c("a-config-provider"),T=c("a-pagination"),ie=c("a-layout-content"),z=c("a-form-item"),Q=c("a-textarea"),ue=c("a-input-number"),ee=c("a-form"),R=c("a-modal"),$=c("a-collapse-panel"),ae=c("a-collapse"),p=c("a-date-picker"),te=c("HelicesByAddress");return m(),N(ge,null,[e.viaClientScreen?h("",!0):(m(),I(A,{key:0,class:"pageHeader",title:"Pedidos",onBack:e.goBack},null,8,["onBack"])),a(ie,{style:_e(e.viaClientScreen?{}:{margin:"10px 16px 25px"})},{default:t(()=>[l("div",{style:_e(e.viaClientScreen?{}:{padding:"20px",background:"#fff"}),class:Ke({content:!e.viaClientScreen})},[l("div",aa,[ta,a(_,null,{default:t(()=>[a(u,{class:"filtros-input",span:20},{default:t(()=>[a(_,null,{default:t(()=>[a(u,{span:6},{default:t(()=>[l("div",null,[oa,a(k,{value:e.formState.orderNumber,"onUpdate:value":r[0]||(r[0]=o=>e.formState.orderNumber=o),placeholder:"N. do Pedido"},null,8,["value"])])]),_:1}),e.isAdmin&&!e.viaClientScreen?(m(),I(u,{key:0,span:6},{default:t(()=>[l("div",null,[la,a(k,{value:e.formState.clientSearch,"onUpdate:value":r[1]||(r[1]=o=>e.formState.clientSearch=o),placeholder:"Cliente"},null,8,["value"])])]),_:1})):h("",!0),!e.isAdmin||e.viaClientScreen?(m(),I(u,{key:1,span:6},{default:t(()=>[l("div",null,[ra,a(k,{value:e.formState.requesterSearch,"onUpdate:value":r[2]||(r[2]=o=>e.formState.requesterSearch=o),placeholder:"Solicitante"},null,8,["value"])])]),_:1})):h("",!0),a(u,{span:7},{default:t(()=>[l("div",null,[sa,a(q,{value:e.formState.requestedDate,"onUpdate:value":r[3]||(r[3]=o=>e.formState.requestedDate=o),format:e.dateFormat,style:{width:"100%"},locale:e.locale,presets:e.rangePresets,allowClear:!1},null,8,["value","format","locale","presets"])])]),_:1}),a(u,{span:5},{default:t(()=>[l("div",null,[na,a(F,{value:e.formState.orderStatus,"onUpdate:value":r[4]||(r[4]=o=>e.formState.orderStatus=o),placeholder:"Status",style:{width:"100%"},allowClear:""},{default:t(()=>[a(v,{value:"1"},{default:t(()=>[d("Pendente")]),_:1}),a(v,{value:"2"},{default:t(()=>[d("Instalação Pendente")]),_:1}),a(v,{value:"3"},{default:t(()=>[d("Finalizado")]),_:1}),a(v,{value:"4"},{default:t(()=>[d("Negado")]),_:1}),a(v,{value:"5"},{default:t(()=>[d("Cancelado")]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1}),a(u,{class:"filtros-button",span:4},{default:t(()=>[a(_,{style:{"justify-content":"space-between"}},{default:t(()=>[a(u,{span:14},{default:t(()=>[l("div",da,[a(C,{type:"primary",style:{width:"100%"},onClick:e.handlePesquisa},{default:t(()=>[a(ne),d(" Pesquisar ")]),_:1},8,["onClick"])])]),_:1}),a(u,{span:9},{default:t(()=>[l("div",ia,[a(C,{style:{width:"100%"},onClick:e.limpaPesquisa},{default:t(()=>[d(" Limpar ")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1})]),e.isAdmin?h("",!0):(m(),N("div",ua,[a(_,{style:{"place-content":"start"}},{default:t(()=>[a(u,null,{default:t(()=>[a(C,{type:"default",icon:e.h(e.PlusOutlined),onClick:r[5]||(r[5]=o=>e.visible=!0)},{default:t(()=>[d("Novo Pedido")]),_:1},8,["icon"])]),_:1})]),_:1})])),l("div",pa,[a(x,null,{renderEmpty:t(()=>[l("div",ca,[a(J,{style:{"font-size":"20px"}}),ma])]),default:t(()=>[a(de,{columns:e.columns,"data-source":e.data,pagination:!1,loading:e.loading,size:"small"},{bodyCell:t(({column:o,text:P,record:w})=>[o.dataIndex==="requestDate"?(m(),N(ge,{key:0},[d(b(e.formatStringDateToBR(w.requestDate)),1)],64)):o.dataIndex==="client"?(m(),N(ge,{key:1},[d(b(w.clientApp.bussinessName),1)],64)):o.dataIndex==="orderStatus"?(m(),I(Z,{key:2,color:e.getTagForOrderStatus(w.orderStatus).color},we({default:t(()=>[d(" "+b(e.getTagForOrderStatus(w.orderStatus).text),1)]),_:2},[e.getTagForOrderStatus(w.orderStatus).icon?{name:"icon",fn:t(()=>[(m(),I(De(e.getTagForOrderStatus(w.orderStatus).icon)))]),key:"0"}:void 0]),1032,["color"])):o.dataIndex==="actions"?(m(),N("div",va,[a(C,{icon:e.h(e.FileTextOutlined),onClick:S=>e.viewOrderDetails(w),size:"small"},{default:t(()=>[d(" Visualizar ")]),_:2},1032,["icon","onClick"])])):h("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),a(T,{current:e.pagination.page,"onUpdate:current":r[6]||(r[6]=o=>e.pagination.page=o),pageSize:e.pagination.pageSize,"onUpdate:pageSize":r[7]||(r[7]=o=>e.pagination.pageSize=o),"page-size-options":e.pageSizeOptions,"show-size-changer":"",total:e.totalRecords,onShowSizeChange:e.onShowSizeChange,style:{"text-align":"right",margin:"25px 0 15px 0"}},{buildOptionText:t(o=>[l("span",null,b(o.value)+"/pág",1)]),_:1},8,["current","pageSize","page-size-options","total","onShowSizeChange"])])],6)]),_:1},8,["style"]),a(R,{open:e.visible,"onUpdate:open":r[16]||(r[16]=o=>e.visible=o),title:"Realize seu Pedido de Hélices!","confirm-loading":e.confirmLoading,width:"750px"},{footer:t(()=>[a(C,{style:{"margin-left":"10px"},onClick:e.resetForm},{default:t(()=>[d("Limpar")]),_:1},8,["onClick"]),a(C,{type:"primary",onClick:e.onNewOrderConfirm,loading:e.confirmLoading},{default:t(()=>[d("Confirmar Pedido")]),_:1},8,["onClick","loading"])]),default:t(()=>[a(ee,{ref:"formRef",rules:e.rules,model:e.newOrderState,layout:"vertical",name:"form_in_modal"},{default:t(()=>[a(_,{style:{"margin-top":"15px"}},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(z,{name:"requesterName",label:"Nome"},{default:t(()=>[a(k,{value:e.newOrderState.requesterName,"onUpdate:value":r[8]||(r[8]=o=>e.newOrderState.requesterName=o),placeholder:"Nome"},null,8,["value"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:11},{default:t(()=>[a(z,{name:"requesterEmail",label:"Email"},{default:t(()=>[a(k,{value:e.newOrderState.requesterEmail,"onUpdate:value":r[9]||(r[9]=o=>e.newOrderState.requesterEmail=o),placeholder:"Email"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(z,{name:"observation",label:"Observação"},{default:t(()=>[a(Q,{value:e.newOrderState.observation,"onUpdate:value":r[10]||(r[10]=o=>e.newOrderState.observation=o),placeholder:"Observação"},null,8,["value"])]),_:1}),a(_,{style:{"margin-top":"15px"}},{default:t(()=>[a(u,{span:3},{default:t(()=>[a(z,{name:"quantityRequested",label:"Quantidade"},{default:t(()=>[a(ue,{value:e.newOrderState.quantityRequested,"onUpdate:value":r[11]||(r[11]=o=>e.newOrderState.quantityRequested=o),placeholder:"Qtde",min:1},null,8,["value"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:5},{default:t(()=>[a(z,{name:"postalCode",label:"CEP"},{default:t(()=>[a(k,{value:e.newOrderState.postalCode,"onUpdate:value":r[12]||(r[12]=o=>e.newOrderState.postalCode=o),placeholder:"CEP","max-length":9,"min-length":9,onInput:e.onInputCep,style:{width:"100%"}},null,8,["value","onInput"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:14},{default:t(()=>[a(z,{name:"address",label:"Endereço"},{default:t(()=>[a(k,{value:e.newOrderState.street,"onUpdate:value":r[13]||(r[13]=o=>e.newOrderState.street=o),placeholder:"Endereço",readonly:!0},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(u,{span:9},{default:t(()=>[a(z,{name:"neighborhood",label:"Bairro"},{default:t(()=>[a(k,{value:e.newOrderState.neighborhood,"onUpdate:value":r[14]||(r[14]=o=>e.newOrderState.neighborhood=o),placeholder:"Bairro",readonly:!0},null,8,["value"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:14},{default:t(()=>[a(z,{name:"cityState",label:"Cidade/Estado"},{default:t(()=>[a(k,{value:e.newOrderState.cityState,"onUpdate:value":r[15]||(r[15]=o=>e.newOrderState.cityState=o),placeholder:"Cidade/Estado",readonly:!0},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["open","confirm-loading"]),a(R,{open:e.visibleDetails,"onUpdate:open":r[18]||(r[18]=o=>e.visibleDetails=o),width:"800px",onCancel:e.closeModal},{footer:t(()=>{var o,P,w,S;return[l("div",Ba,[((o=e.orderSelected)==null?void 0:o.orderStatus)==e.OrderStatus.InstallationPending&&e.isAdmin||((P=e.orderSelected)==null?void 0:P.orderStatus)==e.OrderStatus.Completed?(m(),N("div",Ua,[a(C,{type:"default",onClick:e.openHelicesDetails},{default:t(()=>[d("Visualizar Hélices")]),_:1},8,["onClick"])])):h("",!0),((w=e.orderSelected)==null?void 0:w.orderStatus)==e.OrderStatus.Pending?(m(),N("div",Ha,[e.isAdmin?(m(),I(C,{key:0,type:"primary",onClick:e.approveOrder,loading:!1,style:{"background-color":"#42db42d4"}},{default:t(()=>[d("Aprovar Pedido")]),_:1},8,["onClick"])):h("",!0),e.isAdmin?(m(),I(C,{key:1,type:"primary",onClick:e.denyOrder,loading:!1,style:{"background-color":"#db4242d4"}},{default:t(()=>[d("Negar Pedido")]),_:1},8,["onClick"])):h("",!0),e.isAdmin?h("",!0):(m(),I(C,{key:2,type:"primary",onClick:e.cancelOrder,loading:!1,style:{"background-color":"#db4242d4"}},{default:t(()=>[d("Cancelar Pedido")]),_:1},8,["onClick"]))])):h("",!0),((S=e.orderSelected)==null?void 0:S.orderStatus)==e.OrderStatus.InstallationPending?(m(),N("div",Ma,[e.isAdmin?(m(),I(C,{key:0,type:"primary",onClick:e.confirmOrderInstallation,loading:!1,style:{"background-color":"#42db42d4"}},{default:t(()=>[d("Confirmar Instalação")]),_:1},8,["onClick"])):h("",!0)])):h("",!0)])]}),default:t(()=>{var o;return[l("div",fa,[l("h4",ga,[Sa,d(" "+b((o=e.orderSelected)==null?void 0:o.orderNumber),1)]),l("span",ya,[a(Z,{color:e.getTagForOrderStatus(e.orderSelected.orderStatus).color},we({default:t(()=>[d(" "+b(e.getTagForOrderStatus(e.orderSelected.orderStatus).text),1)]),_:2},[e.getTagForOrderStatus(e.orderSelected.orderStatus).icon?{name:"icon",fn:t(()=>[(m(),I(De(e.getTagForOrderStatus(e.orderSelected.orderStatus).icon)))]),key:"0"}:void 0]),1032,["color"])])]),l("div",ha,[a(ae,{activeKey:e.collapseOrderKey,"onUpdate:activeKey":r[17]||(r[17]=P=>e.collapseOrderKey=P),ghost:""},{default:t(()=>{var P,w;return[a($,{key:"1",header:"Detalhes do Solicitante"},{default:t(()=>{var S,E;return[l("div",Ca,[l("p",null,[ba,d(" "+b((S=e.orderSelected)==null?void 0:S.requesterName),1)]),l("p",null,[Oa,d(b((E=e.orderSelected)==null?void 0:E.requesterEmail),1)])])]}),_:1}),a($,{key:"2",header:"Detalhes do Pedido"},{default:t(()=>{var S,E;return[l("div",ka,[l("p",null,[_a,d(" "+b(e.formatStringDateToBR((S=e.orderSelected)==null?void 0:S.requestDate)),1)]),l("p",null,[wa,d(" "+b((E=e.orderSelected)==null?void 0:E.quantityRequested),1)])])]}),_:1}),a($,{key:"3",header:"Endereço"},{default:t(()=>{var S,E,B,U,y;return[l("div",Da,[l("p",null,[qa,d(" "+b(e.formatCEP((S=e.orderSelected)==null?void 0:S.addressApp.postalCode)),1)]),l("p",null,[Ea,d(" "+b((E=e.orderSelected)==null?void 0:E.addressApp.street),1)]),l("p",null,[Ia,d(" "+b((B=e.orderSelected)==null?void 0:B.addressApp.neighborhood),1)]),l("p",null,[Pa,d(" "+b((U=e.orderSelected)==null?void 0:U.addressApp.city)+"/"+b((y=e.orderSelected)==null?void 0:y.addressApp.state),1)])])]}),_:1}),(P=e.orderSelected)!=null&&P.observation?(m(),I($,{key:"4",header:"Observações"},{default:t(()=>{var S;return[l("div",null,[l("p",Na,b((S=e.orderSelected)==null?void 0:S.observation),1)])]}),_:1})):h("",!0),(w=e.orderSelected)!=null&&w.installationDate?(m(),I($,{key:"5",header:"Outras Informações"},{default:t(()=>{var S,E,B,U,y,Y,oe;return[(S=e.orderSelected)!=null&&S.installationDate?(m(),N("div",Ta,[l("p",null,[za,((E=e.orderSelected)==null?void 0:E.orderStatus)==e.OrderStatus.InstallationPending&&new Date((B=e.orderSelected)==null?void 0:B.installationDate).getDate()<=new Date().getDate()?(m(),N("span",Aa," Pendente de Instalação ")):h("",!0),((U=e.orderSelected)==null?void 0:U.orderStatus)==e.OrderStatus.InstallationPending&&new Date((y=e.orderSelected)==null?void 0:y.installationDate).getDate()>new Date().getDate()?(m(),N("span",Fa," Instalação Atrasada ")):h("",!0),((Y=e.orderSelected)==null?void 0:Y.orderStatus)==e.OrderStatus.Completed?(m(),N("span",Ra," Instalação Concluída ")):h("",!0)]),l("p",null,[$a,d(" "+b(e.formatStringDateToBR((oe=e.orderSelected)==null?void 0:oe.installationDate)),1)])])):h("",!0)]}),_:1})):h("",!0)]}),_:1},8,["activeKey"])])]}),_:1},8,["open","onCancel"]),a(R,{open:e.aproveOrderVisible,"onUpdate:open":r[20]||(r[20]=o=>e.aproveOrderVisible=o),title:"Selecione a Data para a Instalação do Pedido","confirm-loading":e.aproveOrderLoading,onCancel:e.onAproveOrderCancel,width:"490px"},{footer:t(()=>[]),default:t(()=>[a(ee,{ref:"aproveFormRef",model:e.aproveOrderState,layout:"vertical",name:"form_in_modal"},{default:t(()=>[a(_,{style:{"margin-top":"35px"}},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(z,{style:{"margin-bottom":"0px"}},{default:t(()=>[a(p,{value:e.aproveOrderState.installationDate,"onUpdate:value":r[19]||(r[19]=o=>e.aproveOrderState.installationDate=o),format:e.dateFormat,style:{width:"100%"},locale:e.locale,allowClear:!1},null,8,["value","format","locale"])]),_:1})]),_:1}),a(u,{span:12,style:{"text-align":"right"}},{default:t(()=>[a(C,{type:"primary",onClick:e.onAproveOrderConfirm,loading:e.confirmLoading},{default:t(()=>[d("Confirmar Aprovação")]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading","onCancel"]),a(R,{open:e.orderHelicesVisible,"onUpdate:open":r[21]||(r[21]=o=>e.orderHelicesVisible=o),title:"Visualize as Hélices Cadastradas",width:"900px"},{footer:t(()=>[l("div",Va,[e.isAdmin?(m(),I(C,{key:0,type:"primary",onClick:e.closeHelicesDetails},{default:t(()=>[d("Fechar")]),_:1},8,["onClick"])):h("",!0)])]),default:t(()=>{var o,P;return[l("div",null,[a(te,{clientId:(o=e.orderSelected)==null?void 0:o.clientId,addressId:(P=e.orderSelected)==null?void 0:P.addressId,orderId:e.orderSelectedId,viaClientScreen:!0},null,8,["clientId","addressId","orderId"])])]}),_:1},8,["open"])],64)}const et=Pe(ea,[["render",ja],["__scopeId","data-v-f47527e9"]]);export{et as default};
