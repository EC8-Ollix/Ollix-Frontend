import{a as r,A as j,d as U,f as O,u as A,g as C,h as L,U as x,i as z,n as I,j as q,_ as J,r as p,o as _,c as V,b as c,k as P,w as s,l as w,e as y,p as B,m as M}from"./index-305db2e2.js";import{a as H}from"./axios-21b846bc.js";var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const T=D;function k(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},g=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(l).filter(function(i){return Object.getOwnPropertyDescriptor(l,i).enumerable}))),g.forEach(function(i){G(e,i,l[i])})}return e}function G(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var F=function(a,l){var g=k({},a,l.attrs);return r(j,k({},g,{icon:T}),null)};F.displayName="LockOutlined";F.inheritAttrs=!1;const Q=F,W=U({name:"Register",setup(){const e=O(1),a=A(),l=()=>{console.error("Estado: ",1),e.value=1},g=O(),i=C({firstName:"",lastName:"",userEmail:"",password:"",confirmPassword:""}),f={firstName:[{required:!0,message:"O Nome é obrigatório",trigger:"blur"},{max:100,message:"O Nome deve ter no máximo 100 caracteres",trigger:"blur"}],lastName:[{required:!0,message:"O Sobrenome é obrigatório",trigger:"blur"},{max:200,message:"O Sobrenome deve ter no máximo 200 caracteres",trigger:"blur"}],userEmail:[{required:!0,message:"O Email é obrigatório",trigger:"blur"},{type:"email",message:"O Email está inválido",trigger:"blur"}],password:[{required:!0,validator:(o,t)=>t===""?Promise.reject("Por favor, insira a senha."):t!==i.confirmPassword?Promise.reject("As senhas não coincidem."):Promise.resolve(),trigger:"blur"},{min:6,message:"A senha deve ter pelo menos 6 caracteres",trigger:"blur"}],confirmPassword:[{required:!0,validator:(o,t)=>t===""?Promise.reject("Por favor, confirme a senha."):t!==i.password?Promise.reject("As senhas não coincidem."):Promise.resolve(),trigger:"blur"}]},u=async o=>{e.value=2},N=o=>{console.log("Failed: ",o)};O();const m=C({companyName:"",bussinessName:"",cnpj:""});L(()=>v(m.cnpj));const v=o=>{const t=o.replace(/[^\d]/g,"");let d=t;return t.length>12?d=`${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5,8)}/${t.slice(8,12)}-${t.slice(12,14)}`:t.length>8?d=`${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5,8)}/${t.slice(8)}`:t.length>5?d=`${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5)}`:t.length>2&&(d=`${t.slice(0,2)}.${t.slice(2)}`),d};return{currentStep:e,goBack:l,userFormRef:g,userState:i,userRules:f,handleUserRegistration:u,handleUserRegistrationFailed:N,clientState:m,clientRules:{companyName:[{required:!0,message:"A Razão Social é Obrigatória",trigger:"blur"},{max:400,message:"A Razão Social deve ter no máximo 400 caracteres",trigger:"blur"}],bussinessName:[{required:!0,message:"O Nome Fantasia é obrigatório",trigger:"blur"},{max:400,message:"O Nome Fantasia deve ter no máximo 40 caracteres",trigger:"blur"}],cnpj:[{required:!0,message:"O CNPJ é obrigatório",trigger:"blur"},{max:18,message:"O CNPJ deve ter 18 caracteres",trigger:"blur"},{min:18,message:"O CNPJ deve ter 18 caracteres",trigger:"blur"}]},handleClientRegistration:async()=>{try{const o={firstName:i.firstName,lastName:i.lastName,userEmail:i.userEmail,userPassword:i.password,companyName:m.companyName,bussinessName:m.bussinessName,cnpj:m.cnpj},t=await H.post("https://hom-ollix-api.azurewebsites.net/api/auth/register",o);t.status>=200&&t.status<300&&(I({successTitle:"Conta Registrada com Sucesso!",successMessage:"Entre agora mesmo na plataforma"}),await a.push("/Ollix-Frontend/login"))}catch(o){if(q(o),o.response&&o.response.data.validationErrors){const t=o.response.data.validationErrors.map(d=>d.identifier);(t.includes("UserEmail")||t.includes("UserPassword")||t.includes("FirstName")||t.includes("LastName"))&&(e.value=1)}}},handleClientRegistrationFailed:o=>{console.log("Failed: ",o)},onInput:o=>{const d=o.target.value;m.cnpj=v(d)}}},components:{UserOutlined:x,LockOutlined:Q,ArrowLeftOutlined:z}}),X="/Ollix-Frontend/background-auth.jpg",Y="/Ollix-Frontend/logo-ollix.svg";const b=e=>(B("data-v-79da65e8"),e=e(),M(),e),Z={class:"register-container"},K=b(()=>c("div",{class:"background"},[c("img",{src:X,class:"background-image"})],-1)),ee={class:"register-form"},te=b(()=>c("img",{src:Y,alt:"Logo",class:"logo",title:"Oliix"},null,-1)),ae=b(()=>c("p",{class:"description"}," Energia eólica a partir do vento gerado pelos carros ",-1)),re=b(()=>c("h3",{class:"title"},"Registre-se na Plataforma!",-1)),se=b(()=>c("h3",{class:"title"},"Agora Registre sua Empresa!",-1)),oe=b(()=>c("div",{class:"footer-form"},[c("h6",null,"Ollix"),c("h6",null,"Copyright ©2023")],-1));function ne(e,a,l,g,i,$){const h=p("UserOutlined"),f=p("a-input"),u=p("a-form-item"),N=p("LockOutlined"),m=p("a-input-password"),v=p("a-button"),S=p("a-form"),R=p("ArrowLeftOutlined"),E=p("router-link");return _(),V("div",Z,[K,c("div",ee,[te,ae,e.currentStep===1?(_(),P(S,{key:0,ref:"userFormRef",model:e.userState,rules:e.userRules,layout:"vertical",onFinish:e.handleUserRegistration,onFinishFailed:e.handleUserRegistrationFailed,style:{width:"22rem"}},{default:s(()=>[re,r(u,{label:"Primeiro Nome",name:"firstName"},{default:s(()=>[r(f,{value:e.userState.firstName,"onUpdate:value":a[0]||(a[0]=n=>e.userState.firstName=n),placeholder:"Nome"},{prefix:s(()=>[r(h,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),r(u,{label:"Último Nome",name:"lastName"},{default:s(()=>[r(f,{value:e.userState.lastName,"onUpdate:value":a[1]||(a[1]=n=>e.userState.lastName=n),placeholder:"Sobrenome"},{prefix:s(()=>[r(h,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),r(u,{label:"Email",name:"userEmail"},{default:s(()=>[r(f,{value:e.userState.userEmail,"onUpdate:value":a[2]||(a[2]=n=>e.userState.userEmail=n),placeholder:"Email"},{prefix:s(()=>[r(h,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),r(u,{label:"Senha",name:"password"},{default:s(()=>[r(m,{value:e.userState.password,"onUpdate:value":a[3]||(a[3]=n=>e.userState.password=n),placeholder:"Senha"},{prefix:s(()=>[r(N,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),r(u,{label:"Confirme a Senha",name:"confirmPassword"},{default:s(()=>[r(m,{value:e.userState.confirmPassword,"onUpdate:value":a[4]||(a[4]=n=>e.userState.confirmPassword=n),placeholder:"Confirmação de Senha"},{prefix:s(()=>[r(N,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),r(u,null,{default:s(()=>[r(v,{type:"primary","html-type":"submit",class:"register-button"},{default:s(()=>[y("Proximo Passo")]),_:1})]),_:1})]),_:1},8,["model","rules","onFinish","onFinishFailed"])):w("",!0),e.currentStep===2?(_(),P(S,{key:1,ref:"clientFormRef",model:e.clientState,rules:e.clientRules,layout:"vertical",onFinish:e.handleClientRegistration,onFinishFailed:e.handleClientRegistrationFailed,style:{width:"22rem"}},{default:s(()=>[se,e.currentStep===2?(_(),P(v,{key:0,style:{"margin-bottom":"15px"},onClick:e.goBack,type:"text",shape:"circle"},{icon:s(()=>[r(R)]),_:1},8,["onClick"])):w("",!0),r(u,{label:"Razão Social",name:"companyName"},{default:s(()=>[r(f,{value:e.clientState.companyName,"onUpdate:value":a[5]||(a[5]=n=>e.clientState.companyName=n),placeholder:"Razão Social"},null,8,["value"])]),_:1}),r(u,{label:"Nome Fantasia",name:"bussinessName"},{default:s(()=>[r(f,{value:e.clientState.bussinessName,"onUpdate:value":a[6]||(a[6]=n=>e.clientState.bussinessName=n),placeholder:"Nome Fantasia"},null,8,["value"])]),_:1}),r(u,{label:"CNPJ",name:"cnpj"},{default:s(()=>[r(f,{value:e.clientState.cnpj,"onUpdate:value":a[7]||(a[7]=n=>e.clientState.cnpj=n),placeholder:"CNPJ","max-length":18,onInput:e.onInput},null,8,["value","onInput"])]),_:1}),r(u,null,{default:s(()=>[r(v,{type:"primary","html-type":"submit",class:"register-button"},{default:s(()=>[y("Confirmar")]),_:1})]),_:1})]),_:1},8,["model","rules","onFinish","onFinishFailed"])):w("",!0),c("p",null,[y(" Já possui uma conta? "),r(E,{to:"/Ollix-Frontend/login"},{default:s(()=>[r(v,{size:"small",type:"link"},{default:s(()=>[y(" Entre aqui")]),_:1})]),_:1})]),oe])])}const ue=J(W,[["render",ne],["__scopeId","data-v-79da65e8"]]);export{ue as default};
