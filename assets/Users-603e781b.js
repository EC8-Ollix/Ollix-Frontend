import{t as fe,j as se,k as de,r as A,l as pe,m as me,u as le,n as V,q as ie,s as q,c as k,d as he,a as z,o as Z,b as ee,e as J,w as te,f as ye,F as ne,g as ve,v as ae,x as ge}from"./index-7b6db240.js";function ue(e){return pe()?(me(e),!0):!1}function K(){const e=new Set,n=s=>{e.delete(s)};return{on:s=>{e.add(s);const t=()=>n(s);return ue(t),{off:t}},off:n,trigger:s=>Promise.all(Array.from(e).map(t=>t(s)))}}function O(e){return typeof e=="function"?e():le(e)}const ce=typeof window<"u"&&typeof document<"u",we=()=>{};function oe(e,n=!1,r="Timeout"){return new Promise((d,s)=>{setTimeout(n?()=>s(r):d,e)})}function Te(e,...n){return n.some(r=>r in e)}function L(...e){if(e.length!==1)return fe(...e);const n=e[0];return typeof n=="function"?se(de(()=>({get:n,set:we}))):A(n)}function Q(e,n=!1){function r(a,{flush:o="sync",deep:i=!1,timeout:u,throwOnTimeout:v}={}){let p=null;const g=[new Promise(F=>{p=V(e,x=>{a(x)!==n&&(p==null||p(),F(x))},{flush:o,deep:i,immediate:!0})})];return u!=null&&g.push(oe(u,v).then(()=>O(e)).finally(()=>p==null?void 0:p())),Promise.race(g)}function d(a,o){if(!ie(a))return r(x=>x===a,o);const{flush:i="sync",deep:u=!1,timeout:v,throwOnTimeout:p}=o??{};let m=null;const F=[new Promise(x=>{m=V([e,a],([P,E])=>{n!==(P===E)&&(m==null||m(),x(P))},{flush:i,deep:u,immediate:!0})})];return v!=null&&F.push(oe(v,p).then(()=>O(e)).finally(()=>(m==null||m(),O(e)))),Promise.race(F)}function s(a){return r(o=>!!o,a)}function t(a){return d(null,a)}function l(a){return d(void 0,a)}function y(a){return r(Number.isNaN,a)}function T(a,o){return r(i=>{const u=Array.from(i);return u.includes(a)||u.includes(O(a))},o)}function b(a){return _(1,a)}function _(a=1,o){let i=-1;return r(()=>(i+=1,i>=a),o)}return Array.isArray(O(e))?{toMatch:r,toContains:T,changed:b,changedTimes:_,get not(){return Q(e,!n)}}:{toMatch:r,toBe:d,toBeTruthy:s,toBeNull:t,toBeNaN:y,toBeUndefined:l,changed:b,changedTimes:_,get not(){return Q(e,!n)}}}function be(e){return Q(e)}function Fe(e,n,r={}){const{immediate:d=!0}=r,s=A(!1);let t=null;function l(){t&&(clearTimeout(t),t=null)}function y(){s.value=!1,l()}function T(...b){l(),s.value=!0,t=setTimeout(()=>{s.value=!1,t=null,e(...b)},O(n))}return d&&(s.value=!0,ce&&T()),ue(y),{isPending:se(s),start:T,stop:y}}const _e=ce?window:void 0,xe={json:"application/json",text:"text/plain"};function re(e){return e&&Te(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function W(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function Pe(e,...n){var r;const d=typeof AbortController=="function";let s={},t={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const l={method:"GET",type:"text",payload:void 0};n.length>0&&(re(n[0])?t={...t,...n[0]}:s=n[0]),n.length>1&&re(n[1])&&(t={...t,...n[1]});const{fetch:y=(r=_e)==null?void 0:r.fetch,initialData:T,timeout:b}=t,_=K(),a=K(),o=K(),i=A(!1),u=A(!1),v=A(!1),p=A(null),m=q(null),g=q(null),F=q(T||null),x=k(()=>d&&u.value);let P,E;const G=()=>{d&&(P==null||P.abort(),P=new AbortController,P.signal.onabort=()=>v.value=!0,s={...s,signal:P.signal})},M=c=>{u.value=c,i.value=!c};b&&(E=Fe(G,b,{immediate:!1}));const U=async(c=!1)=>{var w;G(),M(!0),g.value=null,p.value=null,v.value=!1;const h={method:l.method,headers:{}};if(l.payload){const I=W(h.headers),j=O(l.payload);!l.payloadType&&j&&Object.getPrototypeOf(j)===Object.prototype&&!(j instanceof FormData)&&(l.payloadType="json"),l.payloadType&&(I["Content-Type"]=(w=xe[l.payloadType])!=null?w:l.payloadType),h.body=l.payloadType==="json"?JSON.stringify(j):j}let N=!1;const D={url:O(e),options:{...h,...s},cancel:()=>{N=!0}};if(t.beforeFetch&&Object.assign(D,await t.beforeFetch(D)),N||!y)return M(!1),Promise.resolve(null);let B=null;return E&&E.start(),new Promise((I,j)=>{var X;y(D.url,{...h,...D.options,headers:{...W(h.headers),...W((X=D.options)==null?void 0:X.headers)}}).then(async f=>{if(m.value=f,p.value=f.status,B=await f[l.type](),!f.ok)throw F.value=T||null,new Error(f.statusText);return t.afterFetch&&({data:B}=await t.afterFetch({data:B,response:f})),F.value=B,_.trigger(f),I(f)}).catch(async f=>{let Y=f.message||f.name;return t.onFetchError&&({error:Y,data:B}=await t.onFetchError({data:B,error:f,response:m.value})),g.value=Y,t.updateDataOnError&&(F.value=B),a.trigger(f),c?j(f):I(null)}).finally(()=>{M(!1),E&&E.stop(),o.trigger(null)})})},R=L(t.refetch);V([R,L(e)],([c])=>c&&U(),{deep:!0});const H={isFinished:i,statusCode:p,response:m,error:g,data:F,isFetching:u,canAbort:x,aborted:v,abort:G,execute:U,onFetchResponse:_.on,onFetchError:a.on,onFetchFinally:o.on,get:C("GET"),put:C("PUT"),post:C("POST"),delete:C("DELETE"),patch:C("PATCH"),head:C("HEAD"),options:C("OPTIONS"),json:S("json"),text:S("text"),blob:S("blob"),arrayBuffer:S("arrayBuffer"),formData:S("formData")};function C(c){return(w,h)=>{if(!u.value)return l.method=c,l.payload=w,l.payloadType=h,ie(l.payload)&&V([R,L(l.payload)],([N])=>N&&U(),{deep:!0}),{...H,then(N,D){return $().then(N,D)}}}}function $(){return new Promise((c,w)=>{be(i).toBe(!0).then(()=>c(H)).catch(h=>w(h))})}function S(c){return()=>{if(!u.value)return l.type=c,{...H,then(w,h){return $().then(w,h)}}}}return t.immediate&&Promise.resolve().then(()=>U()),{...H,then(c,w){return $().then(c,w)}}}const Oe={style:{padding:"20px",background:"#fff"},class:"content"},Ce=he({__name:"Users",setup(e){const n=[{title:"Name",dataIndex:"name",sorter:!0,width:"20%"},{title:"Gender",dataIndex:"gender",filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],width:"20%"},{title:"Email",dataIndex:"email"}],r=A({results:20,page:1}),d=k(()=>`https://randomuser.me/api?results=${r.value.results}&page=${r.value.page}`),{isFetching:s,data:t,execute:l}=Pe(d,{immediate:!0}),y=k(()=>{try{return JSON.parse(t.value||"")}catch(o){return console.error("Failed to parse API response:",o),null}}),T=k(()=>{var o,i;return console.log("Parsed data:",(o=y.value)==null?void 0:o.results),((i=y.value)==null?void 0:i.results)||[]}),b=k(()=>({total:200,current:r.value.page,pageSize:r.value.results})),_=o=>{r.value.page=o.current,r.value.results=o.pageSize||0,l()},a=o=>o.login.uuid;return(o,i)=>{const u=z("a-page-header"),v=z("a-table"),p=z("a-layout-content");return Z(),ee(ne,null,[J(u,{class:"pageHeader",title:"Usuários","sub-title":"Gerencie os Usuários por aqui",onBack:()=>null}),J(p,{style:{margin:"10px 16px 25px"}},{default:te(()=>[ye("div",Oe,[J(v,{columns:n,"row-key":a,"data-source":T.value,pagination:b.value,loading:le(s),onChange:_},{bodyCell:te(({column:m,text:g})=>[m.dataIndex==="name"?(Z(),ee(ne,{key:0},[ve(ae(g.first)+" "+ae(g.last),1)],64)):ge("",!0)]),_:1},8,["data-source","pagination","loading"])])]),_:1})],64)}}});export{Ce as default};
